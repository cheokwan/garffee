<html><head><title>iOS background updates summary</title><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css"> .lst-kix_veef32mi4y9a-2 > li:before{content:"■  "}ul.lst-kix_2cqztnppw3ra-5{list-style-type:none}ul.lst-kix_2cqztnppw3ra-4{list-style-type:none}ul.lst-kix_2cqztnppw3ra-3{list-style-type:none}ul.lst-kix_2cqztnppw3ra-2{list-style-type:none}ul.lst-kix_2cqztnppw3ra-8{list-style-type:none}.lst-kix_s4xdbwrhzwu3-6 > li:before{content:"●  "}ul.lst-kix_2cqztnppw3ra-7{list-style-type:none}ul.lst-kix_2cqztnppw3ra-6{list-style-type:none}.lst-kix_1ly0y6rrhgfk-4 > li:before{content:"○  "}.lst-kix_ivl06ee9mjqy-5 > li:before{content:"■  "}.lst-kix_obj9vatogc2m-6 > li:before{content:"●  "}.lst-kix_1ly0y6rrhgfk-7 > li:before{content:"○  "}ul.lst-kix_ivl06ee9mjqy-5{list-style-type:none}.lst-kix_2cqztnppw3ra-5 > li:before{content:"■  "}.lst-kix_obj9vatogc2m-1 > li:before{content:"○  "}ul.lst-kix_ivl06ee9mjqy-4{list-style-type:none}.lst-kix_s4xdbwrhzwu3-3 > li:before{content:"●  "}ul.lst-kix_ivl06ee9mjqy-7{list-style-type:none}.lst-kix_s4xdbwrhzwu3-5 > li:before{content:"■  "}ul.lst-kix_ivl06ee9mjqy-6{list-style-type:none}ul.lst-kix_ivl06ee9mjqy-1{list-style-type:none}.lst-kix_veef32mi4y9a-7 > li:before{content:"○  "}ul.lst-kix_ivl06ee9mjqy-0{list-style-type:none}.lst-kix_s4xdbwrhzwu3-0 > li:before{content:"●  "}ul.lst-kix_ivl06ee9mjqy-3{list-style-type:none}ul.lst-kix_ivl06ee9mjqy-2{list-style-type:none}.lst-kix_ivl06ee9mjqy-0 > li:before{content:"●  "}ul.lst-kix_1ly0y6rrhgfk-5{list-style-type:none}ul.lst-kix_1ly0y6rrhgfk-4{list-style-type:none}ul.lst-kix_1ly0y6rrhgfk-3{list-style-type:none}ul.lst-kix_1ly0y6rrhgfk-2{list-style-type:none}ul.lst-kix_1ly0y6rrhgfk-1{list-style-type:none}ul.lst-kix_1ly0y6rrhgfk-0{list-style-type:none}.lst-kix_ivl06ee9mjqy-8 > li:before{content:"■  "}.lst-kix_2cqztnppw3ra-2 > li:before{content:"■  "}.lst-kix_obj9vatogc2m-8 > li:before{content:"■  "}.lst-kix_2cqztnppw3ra-8 > li:before{content:"■  "}.lst-kix_ivl06ee9mjqy-2 > li:before{content:"■  "}ul.lst-kix_1ly0y6rrhgfk-8{list-style-type:none}ul.lst-kix_1ly0y6rrhgfk-7{list-style-type:none}ul.lst-kix_1ly0y6rrhgfk-6{list-style-type:none}.lst-kix_s4xdbwrhzwu3-4 > li:before{content:"○  "}.lst-kix_obj9vatogc2m-4 > li:before{content:"○  "}.lst-kix_ivl06ee9mjqy-6 > li:before{content:"●  "}.lst-kix_1ly0y6rrhgfk-5 > li:before{content:"■  "}.lst-kix_obj9vatogc2m-7 > li:before{content:"○  "}.lst-kix_2cqztnppw3ra-4 > li:before{content:"○  "}.lst-kix_2cqztnppw3ra-7 > li:before{content:"○  "}ul.lst-kix_obj9vatogc2m-8{list-style-type:none}ul.lst-kix_obj9vatogc2m-7{list-style-type:none}.lst-kix_obj9vatogc2m-5 > li:before{content:"■  "}ul.lst-kix_obj9vatogc2m-6{list-style-type:none}ul.lst-kix_obj9vatogc2m-5{list-style-type:none}ul.lst-kix_obj9vatogc2m-4{list-style-type:none}ul.lst-kix_obj9vatogc2m-3{list-style-type:none}ul.lst-kix_obj9vatogc2m-2{list-style-type:none}.lst-kix_obj9vatogc2m-3 > li:before{content:"●  "}.lst-kix_veef32mi4y9a-6 > li:before{content:"●  "}ul.lst-kix_2cqztnppw3ra-0{list-style-type:none}.lst-kix_veef32mi4y9a-5 > li:before{content:"■  "}ul.lst-kix_2cqztnppw3ra-1{list-style-type:none}.lst-kix_veef32mi4y9a-4 > li:before{content:"○  "}.lst-kix_obj9vatogc2m-0 > li:before{content:"●  "}.lst-kix_s4xdbwrhzwu3-2 > li:before{content:"■  "}.lst-kix_veef32mi4y9a-8 > li:before{content:"■  "}.lst-kix_obj9vatogc2m-2 > li:before{content:"■  "}.lst-kix_ivl06ee9mjqy-1 > li:before{content:"○  "}.lst-kix_1ly0y6rrhgfk-3 > li:before{content:"●  "}.lst-kix_ivl06ee9mjqy-7 > li:before{content:"○  "}.lst-kix_1ly0y6rrhgfk-2 > li:before{content:"■  "}.lst-kix_ivl06ee9mjqy-3 > li:before{content:"●  "}.lst-kix_veef32mi4y9a-0 > li:before{content:"●  "}.lst-kix_s4xdbwrhzwu3-8 > li:before{content:"■  "}.lst-kix_s4xdbwrhzwu3-7 > li:before{content:"○  "}ul.lst-kix_s4xdbwrhzwu3-8{list-style-type:none}ul.lst-kix_s4xdbwrhzwu3-6{list-style-type:none}ul.lst-kix_s4xdbwrhzwu3-7{list-style-type:none}ul.lst-kix_s4xdbwrhzwu3-4{list-style-type:none}ul.lst-kix_s4xdbwrhzwu3-5{list-style-type:none}ul.lst-kix_s4xdbwrhzwu3-2{list-style-type:none}ul.lst-kix_s4xdbwrhzwu3-3{list-style-type:none}ul.lst-kix_obj9vatogc2m-1{list-style-type:none}ul.lst-kix_s4xdbwrhzwu3-0{list-style-type:none}ul.lst-kix_obj9vatogc2m-0{list-style-type:none}ul.lst-kix_s4xdbwrhzwu3-1{list-style-type:none}.lst-kix_2cqztnppw3ra-0 > li:before{content:"●  "}ul.lst-kix_ivl06ee9mjqy-8{list-style-type:none}.lst-kix_veef32mi4y9a-1 > li:before{content:"○  "}.lst-kix_1ly0y6rrhgfk-1 > li:before{content:"○  "}.lst-kix_2cqztnppw3ra-3 > li:before{content:"●  "}.lst-kix_ivl06ee9mjqy-4 > li:before{content:"○  "}.lst-kix_veef32mi4y9a-3 > li:before{content:"●  "}.lst-kix_2cqztnppw3ra-1 > li:before{content:"○  "}.lst-kix_1ly0y6rrhgfk-6 > li:before{content:"●  "}.lst-kix_1ly0y6rrhgfk-0 > li:before{content:"●  "}ul.lst-kix_veef32mi4y9a-0{list-style-type:none}ul.lst-kix_veef32mi4y9a-1{list-style-type:none}ul.lst-kix_veef32mi4y9a-2{list-style-type:none}ul.lst-kix_veef32mi4y9a-3{list-style-type:none}ul.lst-kix_veef32mi4y9a-4{list-style-type:none}ul.lst-kix_veef32mi4y9a-5{list-style-type:none}ul.lst-kix_veef32mi4y9a-6{list-style-type:none}.lst-kix_1ly0y6rrhgfk-8 > li:before{content:"■  "}ul.lst-kix_veef32mi4y9a-7{list-style-type:none}ul.lst-kix_veef32mi4y9a-8{list-style-type:none}.lst-kix_s4xdbwrhzwu3-1 > li:before{content:"○  "}.lst-kix_2cqztnppw3ra-6 > li:before{content:"●  "}</style></head><body style="max-width:468pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt"><p style="color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span>Apple provides several background modes for special-purpose apps to temporary wake up while the app is put into suspended state (i.e. the UIBackgroundModes):</span></p><p style="height:11pt;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span></span></p><p style="color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span># [mode key] - [mode purpose]</span></p><p style="height:11pt;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span></span></p><p style="color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span>1. location - app needs to update location in background</span></p><ul class="lst-kix_ivl06ee9mjqy-0 start" style="margin:0;padding:0"><li style="margin-right:0;color:#000000;direction:ltr;font-size:11pt;margin-left:36pt;margin-bottom:0;font-family:&quot;Arial&quot;;margin-top:0;padding:0"><span>when location is available to app, can use combination of NSTimer and turning off/on LocationManager to schedule a periodic execution in background indefinitely (tested with timer firing every 1 minute in background for ~30 minutes)</span></li><li style="margin-right:0;color:#000000;direction:ltr;font-size:11pt;margin-left:36pt;margin-bottom:0;font-family:&quot;Arial&quot;;margin-top:0;padding:0"><span>can be turned off by user</span></li><li style="margin-right:0;color:#000000;direction:ltr;font-size:11pt;margin-left:36pt;margin-bottom:0;font-family:&quot;Arial&quot;;margin-top:0;padding:0"><span>plus the usual region monitoring and significant location change services for waking up the app (for 10 seconds or so from what I heard)</span></li></ul><p style="height:11pt;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span></span></p><p style="color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span>2. voip - app needs voip functionality and need to keep a connection alive for receiving incoming calls</span></p><ul class="lst-kix_veef32mi4y9a-0 start" style="margin:0;padding:0"><li style="margin-right:0;color:#000000;direction:ltr;font-size:11pt;margin-left:36pt;margin-bottom:0;font-family:&quot;Arial&quot;;margin-top:0;padding:0"><span>need to set request as the VoIP type, also need to maintain a chained long poll connection with server to keep the background execution flowing (tested with a server script holding each connection for 1 minute, resulting in a 1 minute poll interval in app)</span></li><li style="margin-right:0;color:#000000;direction:ltr;font-size:11pt;margin-left:36pt;margin-bottom:0;font-family:&quot;Arial&quot;;margin-top:0;padding:0"><span>without the voip background mode on, wrapping the chained long poll connections with UIBackgroundTask has no effect, app goes to suspended state after first background task is ended</span></li><li style="margin-right:0;color:#000000;direction:ltr;font-size:11pt;margin-left:36pt;margin-bottom:0;font-family:&quot;Arial&quot;;margin-top:0;padding:0"><span>keepAliveHandler (fire every 10 minutes in background) can only be used when this mode is set</span></li><li style="margin-right:0;color:#000000;direction:ltr;font-size:11pt;margin-left:36pt;margin-bottom:0;font-family:&quot;Arial&quot;;margin-top:0;padding:0"><span>declaring voip in non-VoIP app will almost certainly get rejected by App Store</span></li></ul><p style="height:11pt;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span></span></p><p style="color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span>3. fetch - app needs to fetch data in background</span></p><ul class="lst-kix_2cqztnppw3ra-0 start" style="margin:0;padding:0"><li style="margin-right:0;color:#000000;direction:ltr;font-size:11pt;margin-left:36pt;margin-bottom:0;font-family:&quot;Arial&quot;;margin-top:0;padding:0"><span>can&rsquo;t control when the fetching handling fire in background</span></li><li style="margin-right:0;color:#000000;direction:ltr;font-size:11pt;margin-left:36pt;margin-bottom:0;font-family:&quot;Arial&quot;;margin-top:0;padding:0"><span>empirically fires every 15 minutes or so in background given that the phone is full powered, but can&rsquo;t guarantee, exact schedule depends on usage pattern, battery life, network conditions as Apple claims</span></li><li style="margin-right:0;color:#000000;direction:ltr;font-size:11pt;margin-left:36pt;margin-bottom:0;font-family:&quot;Arial&quot;;margin-top:0;padding:0"><span>once woken up, have about 30 - 40 seconds of execution time then immediately put back to suspended state</span></li><li style="margin-right:0;color:#000000;direction:ltr;font-size:11pt;margin-left:36pt;margin-bottom:0;font-family:&quot;Arial&quot;;margin-top:0;padding:0"><span>new in iOS7</span></li><li style="margin-right:0;color:#000000;direction:ltr;font-size:11pt;margin-left:36pt;margin-bottom:0;font-family:&quot;Arial&quot;;margin-top:0;padding:0"><span>can be turned off by user</span></li></ul><p style="height:11pt;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span></span></p><p style="color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span>4. remote-notification - app needs to fetch data in background after receiving a push notification</span></p><ul class="lst-kix_1ly0y6rrhgfk-0 start" style="margin:0;padding:0"><li style="margin-right:0;color:#000000;direction:ltr;font-size:11pt;margin-left:36pt;margin-bottom:0;font-family:&quot;Arial&quot;;margin-top:0;padding:0"><span>sending silent push notifications: {&ldquo;aps&rdquo;:{&ldquo;content-available&rdquo;:1,&rsquo;sound&rsquo;:0}} with NewsstandContentAvailability mode, thus waking up the handler without user&rsquo;s notice</span></li><li style="margin-right:0;color:#000000;direction:ltr;font-size:11pt;margin-left:36pt;margin-bottom:0;font-family:&quot;Arial&quot;;margin-top:0;padding:0"><span>should be ok to use server-induced APNs to keep the app&rsquo;s heart beat in background (tested with 1 minute push interval for 30 minutes)</span></li><li style="margin-right:0;color:#000000;direction:ltr;font-size:11pt;margin-left:36pt;margin-bottom:0;font-family:&quot;Arial&quot;;margin-top:0;padding:0"><span>silent notifications may have rate limiting imposed by Apple</span></li><li style="margin-right:0;color:#000000;direction:ltr;font-size:11pt;margin-left:36pt;margin-bottom:0;font-family:&quot;Arial&quot;;margin-top:0;padding:0"><span>once woken up, have about 30 - 40 seconds of up time</span></li><li style="margin-right:0;color:#000000;direction:ltr;font-size:11pt;margin-left:36pt;margin-bottom:0;font-family:&quot;Arial&quot;;margin-top:0;padding:0"><span>new in iOS7</span></li><li style="margin-right:0;color:#000000;direction:ltr;font-size:11pt;margin-left:36pt;margin-bottom:0;font-family:&quot;Arial&quot;;margin-top:0;padding:0"><span>can be turned off by user</span></li></ul><p style="height:11pt;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span></span></p><p style="color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span>5. audio - for apps like music player</span></p><ul class="lst-kix_obj9vatogc2m-0 start" style="margin:0;padding:0"><li style="margin-right:0;color:#000000;direction:ltr;font-size:11pt;margin-left:36pt;margin-bottom:0;font-family:&quot;Arial&quot;;margin-top:0;padding:0"><span>plays a silent sound track in background</span></li><li style="margin-right:0;color:#000000;direction:ltr;font-size:11pt;margin-left:36pt;margin-bottom:0;font-family:&quot;Arial&quot;;margin-top:0;padding:0"><span>not recommended, almost certainly will get rejected by App Store</span></li><li style="margin-right:0;color:#000000;direction:ltr;font-size:11pt;margin-left:36pt;margin-bottom:0;font-family:&quot;Arial&quot;;margin-top:0;padding:0"><span>user can override what&rsquo;s playing in background by switching app</span></li></ul><p style="height:11pt;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span></span></p><p style="height:11pt;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span></span></p><p style="color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span># No background modes available at all (e.g. all turned off by users):</span></p><ul class="lst-kix_s4xdbwrhzwu3-0 start" style="margin:0;padding:0"><li style="margin-right:0;color:#000000;direction:ltr;font-size:11pt;margin-left:36pt;margin-bottom:0;font-family:&quot;Arial&quot;;margin-top:0;padding:0"><span>~3 minutes of execution time by using UIBackgroundTask immediately after application enters background.</span></li><li style="margin-right:0;color:#000000;direction:ltr;font-size:11pt;margin-left:36pt;margin-bottom:0;font-family:&quot;Arial&quot;;margin-top:0;padding:0"><span>then immediately suspended indefinitely, no 10 minute keepAliveHandler</span></li></ul><p style="height:11pt;color:#000000;direction:ltr;font-size:11pt;margin:0;font-family:&quot;Arial&quot;;padding:0"><span></span></p></body></html>